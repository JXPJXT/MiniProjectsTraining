{% extends 'create.html' %}

{% block title %}Edit Student - LMS{% endblock %}
{% block content %}
<!-- Reusing the layout from create.html but overriding the action URL in a smart way is tricky in plain Jinja without logic duplication. 
Since Flask renders templates, we can just copy the create logic but change the action or variable context in the route. 
But to be explicit, I'll duplicate the structure for clarity as requested in the plan to ensure edit specificities are handled. -->

<div class="max-w-2xl mx-auto">
    <div class="mb-6 flex items-center text-sm text-gray-500">
        <a href="{{ url_for('index') }}" class="hover:text-indigo-600">Students</a>
        <svg class="h-4 w-4 mx-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        <a href="{{ url_for('detail', student_id=student.id) }}" class="hover:text-indigo-600">{{ student.first_name }}
            {{ student.last_name }}</a>
        <svg class="h-4 w-4 mx-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        <span class="font-medium text-gray-700">Edit</span>
    </div>

    <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
            <h2 class="text-xl font-bold text-gray-800">Edit Student</h2>
            <p class="text-sm text-gray-500">Update student information below.</p>
        </div>

        <form action="{{ url_for('edit', student_id=student.id) }}" method="POST" class="p-6 space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- First Name -->
                <div>
                    <label for="first_name" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                    <input type="text" name="first_name" id="first_name" value="{{ student.first_name }}" required
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                </div>

                <!-- Last Name -->
                <div>
                    <label for="last_name" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                    <input type="text" name="last_name" id="last_name" value="{{ student.last_name }}" required
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                </div>
            </div>

            <!-- Email -->
            <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                        </svg>
                    </div>
                    <input type="email" name="email" id="email" value="{{ student.email }}" required
                        class="w-full pl-10 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Phone -->
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                    <input type="text" name="phone" id="phone" value="{{ student.phone or '' }}"
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                </div>

                <!-- DOB -->
                <div>
                    <label for="date_of_birth" class="block text-sm font-medium text-gray-700 mb-1">Date of
                        Birth</label>
                    <input type="date" name="date_of_birth" id="date_of_birth" value="{{ student.date_of_birth or '' }}"
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                </div>
            </div>

            <!-- Status -->
            <div>
                <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Enrollment Status</label>
                <select name="status" id="status"
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition bg-white">
                    <option value="active" {% if student.status=='active' %}selected{% endif %}>Active</option>
                    <option value="inactive" {% if student.status=='inactive' %}selected{% endif %}>Inactive</option>
                    <option value="suspended" {% if student.status=='suspended' %}selected{% endif %}>Suspended</option>
                    <option value="graduated" {% if student.status=='graduated' %}selected{% endif %}>Graduated</option>
                </select>
            </div>

            <!-- Actions -->
            <div class="pt-4 flex items-center justify-end space-x-3 border-t border-gray-100 mt-6">
                <a href="{{ url_for('detail', student_id=student.id) }}"
                    class="px-5 py-2 rounded-lg text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 transition font-medium">Cancel</a>
                <button type="submit"
                    class="px-6 py-2 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 shadow-md hover:shadow-lg transition transform hover:-translate-y-0.5 font-medium">
                    Update Student
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}