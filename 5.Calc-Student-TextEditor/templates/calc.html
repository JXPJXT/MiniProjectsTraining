{% extends "layout.html" %}

{% block content %}
<div class="card">
    <h2>Stack Calculator</h2>

    <div class="stack-display">{% if stack %}{{ stack }}{% else %}Stack is empty{% endif %}</div>

    <form method="POST" class="controls" style="flex-direction: column; align-items: stretch;">
        <input type="text" name="input" placeholder="Enter number or operator (+, -, *, /)" autofocus autocomplete="off"
            style="margin-bottom: 1rem;">
        <button type="submit" style="width: 100%;">Push / Operate</button>
    </form>

    <div class="controls" style="justify-content: space-between;">
        <form method="POST" style="flex: 1;">
            <input type="hidden" name="action" value="calculate">
            <button type="submit" class="secondary" style="width: 100%;">Force Calculate</button>
        </form>
        <form method="POST" style="flex: 1; margin-left: 1rem;">
            <input type="hidden" name="action" value="clear">
            <button type="submit" class="secondary"
                style="width: 100%; background-color: var(--danger-color); color: white;">Clear All</button>
        </form>
    </div>

    <h3
        style="margin-top: 2rem; color: var(--text-secondary); font-size: 1rem; text-transform: uppercase; letter-spacing: 0.05em;">
        History</h3>
    <ul style="max-height: 200px; overflow-y: auto;">
        {% for item in history[::-1] %}
        <li>
            <span style="font-family: monospace;">{{ item }}</span>
            <span style="font-size: 0.8rem; color: var(--text-secondary);">just now</span>
        </li>
        {% else %}
        <li style="justify-content: center; color: var(--text-secondary); background: none;">No history yet</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}